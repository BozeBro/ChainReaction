<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/game.css">
    <link rel="stylesheet" href="../css/waiting.css">
    <!-- We need index.css for the btn style -->
    <link rel="stylesheet" href="../css/index.css">
    <title>Chain Reaction Game</title>
</head>
<body>
    <div class="overview">
        <div class="noSelect">
            <h2>CHAIN REACTION</h2>
        </div>
        <div class="general">
            <div class="bar-wrap">
                <canvas id="bar"></canvas>
            </div>
            <div class="players noSelect">Ryan vs Benedict</div>
            <div id="interface">
                <canvas id="dynamic" width="450px" height="450px"></canvas>
                <canvas id="static" width="450px" height="450px"></canvas>
                <canvas id="grid" width="450px" height="450px"></canvas>
            </div>
        </div>
        <div></div>
    </div>
    <div id="waitingRoom">
        <div class="wait-title">
            <h2>Chain Reaction</h2>
        </div>
        <div class="wait-current">1 / 4</div>
        <div>
            <div class="lds-roller">
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
            </div>
        </div>
        <div class="ent-ext button-area">
            <button class="ent">Start</button>
            <button class="ext">Exit</button>
        </div>
    </div>
    <script src="../js/board.js"></script>
    <script>
        let chain = new chainReaction(15, 15, "red");
        chain.initBoard();
        let bar = document.getElementById("bar").getContext("2d");
        bar.canvas.width = chain.canvas.width;
        // height is 10% of width
        bar.canvas.height = bar.canvas.width * 0.05;
        changeBarC = (color) => {
            bar.fillStyle = color;
            bar.fillRect(0, 0, bar.canvas.width, bar.canvas.height);
        }
        changeBarC("red")
        chain.socket.onmessage = function (e) {
            let data = JSON.parse(e.data);
            chain.clicked(data.x, data.y);
            changeBarC(data.color);
        };
    </script>
</body>

</html>